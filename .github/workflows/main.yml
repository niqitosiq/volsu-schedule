name: Deployment

on:
  push:
    branches: [ master ]

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    steps:
      - name: Connect to ssh
        uses: appleboy/ssh-action@master
        with:
          host: ${{secrets.HOST}}
          password: ${{secrets.PASSWORD}}
          username: root
          port: 22
          script: |
            cd /home/volsu-schedule
            git pull origin master
      - name: Building docker
        run: |
          cd /home/volsu-schedule
          docker-compose up --build -V
      - name: Checking docker
        run: docker ps -a
